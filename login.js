DevExpress.config({licenseKey:"ewogICJmb3JtYXQiOiAxLAogICJjdXN0b21lcklkIjogImNmOWZhNjAzLTI4ZTAtMTFlMi05NWQwLTAwMjE5YjhiNTA0NyIsCiAgIm1heFZlcnNpb25BbGxvd2VkIjogMjQyCn0=.TTX6Poy2dCPV9Dcrb5Q2r+H+8s1jHV4tvntU/EMPIve2JwJ2KFGoAXzk/R3c4dhEg1nomyae+I97HS6bNVeBcugyjySlHFBedv46LdF3HcdezvM9EdPrli3Tuq/DhyjKrfAi+w=="});const GOOGLE_CLIENT_ID="616832441203-a45kghte7c05vdkj5ri5ejp8qu81vcae.apps.googleusercontent.com";const TOKEN_STORAGE_KEY="modellus_id_token";const MARKETPLACE_SESSION_KEY="mp.session";const APP_HOME="/marketplace.html";if(localStorage.getItem(TOKEN_STORAGE_KEY)){location.href=APP_HOME}function decodeJwtPayload(token){try{const payloadPart=token.split(".")[1];const normalized=payloadPart.replace(/-/g,"+").replace(/_/g,"/");const padded=normalized+"===".slice((normalized.length+3)%4);const decoded=atob(padded);return JSON.parse(decoded)}catch{return null}}window.handleCredentialResponse=({credential})=>{if(!credential){alert("Google Sign-In failed. Please try again.");return}localStorage.setItem(TOKEN_STORAGE_KEY,credential);const payload=decodeJwtPayload(credential)||{};const session={token:credential,userId:payload.sub||"",name:payload.name||payload.email||""};localStorage.setItem(MARKETPLACE_SESSION_KEY,JSON.stringify(session));location.href=APP_HOME};window.onload=()=>{google.accounts.id.initialize({client_id:GOOGLE_CLIENT_ID,callback:window.handleCredentialResponse,ux_mode:"popup",use_fedcm_for_prompt:false});$("#google-login-btn").dxButton({width:"100%",stylingMode:"contained",text:"Sign in with Google",template:function(data,$content){$("<img>",{src:"https://developers.google.com/identity/images/g-logo.png",alt:"Google logo"}).appendTo($content);$("<span>").text(data.text).appendTo($content);$content.addClass("google-btn-content")},onClick:()=>google.accounts.id.prompt()})};
